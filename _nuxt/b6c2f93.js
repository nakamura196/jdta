(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{496:function(t,e,r){"use strict";r.r(e);r(297);var n=r(26),o=r(41),c=r(34),l=r(28),h=r(13),f=r(298);function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(l.a)(t);if(e){var o=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(c.a)(this,r)}}var v=function(t,e,r,desc){var n,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(o<3?n(c):o>3?n(e,r,c):n(e,r))||c);return o>3&&c&&Object.defineProperty(e,r,c),c},y=function(t){Object(o.a)(r,t);var e=d(r);function r(){var t;return Object(n.a)(this,r),(t=e.apply(this,arguments)).baseUrl="https://nakamura196.github.io/jpsearch2",t}return r}(f.Vue);v([Object(f.Prop)({default:12})],y.prototype,"cols",void 0),v([Object(f.Prop)({default:3})],y.prototype,"sm",void 0),v([Object(f.Prop)({default:[]})],y.prototype,"list",void 0);var m=y=v([f.Component],y),j=r(99),k=r(134),P=r.n(k),R=r(515),O=r(494),_=r(568),C=r(548),w=r(167),x=r(569),V=r(488),S=r(549),component=Object(j.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-row",t._l(t.list,(function(e,n){return r("v-col",{key:n,attrs:{cols:t.cols,sm:t.sm}},[r("v-card",{staticClass:"mb-4",attrs:{"no-body":"",flat:""}},[e.href?[r("a",{attrs:{target:"_blank",href:e.href}},[r("v-img",{staticClass:"grey lighten-2",staticStyle:{height:"150px"},attrs:{src:e.image,contain:"",width:"100%"}})],1)]:[r("nuxt-link",{attrs:{to:t.localePath(e.path)}},[r("v-img",{staticClass:"grey lighten-2",staticStyle:{height:"150px"},attrs:{src:e.image,contain:"",width:"100%"}})],1)],t._v(" "),r("div",{staticClass:"pa-4"},[e.href?[r("a",{attrs:{target:"_blank",href:e.href}},[r("h3",[t._v(t._s(e.label))])])]:[r("nuxt-link",{attrs:{to:t.localePath(e.path)}},[r("h3",[t._v(t._s(e.label))])])],t._v(" "),e.description?r("p",{staticClass:"mt-2 mb-0"},[t._v(t._s(e.description))]):t._e()],2),t._v(" "),e.url?[r("v-divider"),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on;return[r("a",t._g({attrs:{target:"_blank",href:e.url}},o),[r("img",{attrs:{width:"30px",src:t.baseUrl+"/img/icons/rdf-logo.svg"}})])]}}],null,!0)},[t._v(" "),r("span",[t._v(t._s("RDF"))])])],1)]:t._e()],2)],1)})),1)}),[],!1,null,null,null);e.default=component.exports;P()(component,{VCard:R.a,VCardActions:O.a,VCol:_.a,VDivider:C.a,VImg:w.a,VRow:x.a,VSpacer:V.a,VTooltip:S.a})},578:function(t,e,r){"use strict";r.r(e);r(27),r(44),r(16),r(297),r(31),r(219),r(217),r(50),r(75),r(49);var n=r(15),o=r(26),c=r(35),l=r(41),h=r(34),f=r(28),d=r(13),v=r(170),y=r(113),m=r.n(y),j=r(496);function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(f.a)(t);if(e){var o=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(h.a)(this,r)}}var P=function(t,e,r,desc){var n,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(o<3?n(c):o>3?n(e,r,c):n(e,r))||c);return o>3&&c&&Object.defineProperty(e,r,c),c},R=function(t){Object(l.a)(f,t);var e,r,h=k(f);function f(){var t;return Object(o.a)(this,f),(t=h.apply(this,arguments)).endpoint="https://dydra.com/ut-digital-archives/jdta/sparql?query=",t.name="search",t.type="agential",t.total=0,t.perPage=24,t.people=[],t.loadingFlag=!0,t.currentPage=1,t.keywordStr="",t}return Object(c.a)(f,[{key:"watchR",value:function(){this.search()}},{key:"getTotal",value:(r=Object(n.a)(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.endpoint+encodeURIComponent("\n      PREFIX dcepk: <http://enpaku-jdta.jp/ontologies/>\n      SELECT DISTINCT (count(distinct ?cho) as ?c) WHERE {\n        ?cho a dcepk:Agent\n      }\n    ")+"&output=json",t.next=4,m.a.get(e);case 4:return r=t.sent,t.abrupt("return",Number(r.data[0].c));case 6:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"created",value:function(){this.search()}},{key:"search",value:(e=Object(n.a)(regeneratorRuntime.mark((function t(){var e,r,n,o,c=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loadingFlag=!0,e=this.$route.query.keyword||"",this.keywordStr=e,t.next=5,this.getTotal();case 5:r=t.sent,this.total=r,n=Number(this.$route.query.from)||0,this.currentPage=n/this.perPage+1,this.lang,o="\n      PREFIX o: <http://omeka.org/s/vocabs/o#>\n      PREFIX dcepk: <http://enpaku-jdta.jp/ontologies/>\n      select distinct ?cho ?label WHERE {\n        ?cho a dcepk:Agent; o:title ?label;\n      }\n      ORDER BY asc(?label)\n      LIMIT ".concat(this.perPage,"\n      OFFSET ").concat(n,"\n    "),m.a.get(this.endpoint+encodeURIComponent(o)+"&output=json").then((function(t){for(var e=[],r=t.data,i=0;i<r.length;i++){var n=r[i],o={label:n.label,href:"https://nakamura196.github.io/jpsearch2/snorql/?describe="+n.cho};n.thumbnail?o.image=n.thumbnail.value:o.image="https://icon-library.com/images/user-icon-free/user-icon-free-8.jpg",e.push(o)}c.people=e,c.loadingFlag=!1}));case 12:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"setCurrentPage",value:function(t){var e=(t-1)*this.perPage,r=Object.assign({},this.$route.query);r.from=e,this.$router.push(this.localePath({name:"search",query:r}),(function(){}),(function(){}))}},{key:"trigger",value:function(t){13===t.keyCode&&this.updateQuery()}},{key:"updateQuery",value:function(){var t,e=Object.assign({},this.$route.query),r=this.keywordStr;r||(r=""),t=r.startsWith('"')&&r.endsWith('"')?[r]:r.split(" "),e.keyword=t,delete e.from,this.$router.push(this.localePath({name:"search",query:e}),(function(){}),(function(){}))}},{key:"head",value:function(){return{title:this.$t("search")}}},{key:"paginationLength",get:function(){return Math.ceil(this.total/this.perPage)}},{key:"lang",get:function(){return this.$i18n.locale}},{key:"items",get:function(){return[{text:this.$t("top"),disabled:!1,to:this.localePath({name:"index"})},{text:this.$t(this.type)},{text:this.$t("search")+(this.total>0?"（"+this.total.toLocaleString()+"）":"")}]}}]),f}(v.Vue);P([Object(v.Watch)("$route")],R.prototype,"watchR",null);var O=R=P([Object(v.Component)({components:{Grid:j.default}})],R),_=r(99),C=r(134),w=r.n(C),x=r(528),V=r(491),S=r(205),$=r(570),E=r(204),I=r(55),component=Object(_.a)(O,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-sheet",{attrs:{color:"grey lighten-2"}},[r("v-container",{staticClass:"py-4",attrs:{fluid:""}},[r("v-breadcrumbs",{staticClass:"py-0",attrs:{items:t.items},scopedSlots:t._u([{key:"divider",fn:function(){return[r("v-icon",[t._v("mdi-chevron-right")])]},proxy:!0}])})],1)],1),t._v(" "),r("v-container",[t.loadingFlag?[r("div",{staticClass:"text-center my-10"},[r("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1)]:[r("div",{staticClass:"text-center my-5"},[r("v-pagination",{attrs:{length:t.paginationLength,"total-visible":7},on:{input:t.setCurrentPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),r("Grid",{attrs:{cols:"12",sm:2,list:t.people}}),t._v(" "),r("div",{staticClass:"text-center my-5"},[r("v-pagination",{attrs:{length:t.paginationLength,"total-visible":7},on:{input:t.setCurrentPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)]],2)],1)}),[],!1,null,null,null);e.default=component.exports;w()(component,{Grid:r(496).default}),w()(component,{VBreadcrumbs:x.a,VContainer:V.a,VIcon:S.a,VPagination:$.a,VProgressCircular:E.a,VSheet:I.a})}}]);